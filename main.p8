pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
  basket_x = 64
  basket_y = 100
  score = 0
  live_count = 3
  basket_speed = 5
  egg_speed = 2
  egg_spawn_timer = 0
  eggs = {}
  l_x = 8
end

function _draw()
  -- for clearing the game screen
  cls()

  -- score & lives
  print("score: " .. score, 0, 8)
  for i = 1, live_count do
    spr(1, 8 * (i - 1), 16)
  end

  -- drawing the basket
  draw_scaled_sprite(0, basket_x, basket_y, 2)

  -- draw eggs
  for egg in all(eggs) do
    spr(2, egg.x, egg.y)
  end

  if live_count <= 0 then
    print("game over!", 44, 64, 8)
    print("final score: " .. score, 8)
    print("press x to restart", 8)
  end
end

function _update()
  -- stop game
  if live_count <= 0 then
    if btnp(❎) then
      _init()
    end
    return
  end

  if btn(➡️) then
    basket_x += basket_speed
  end

  if btn(⬅️) then
    basket_x -= basket_speed
  end
  -- keeping basked inside screen
  basket_x = mid(0, basket_x, 120)

  egg_spawn_timer += 1
  -- making eggs
  if egg_spawn_timer > 10 then
    add(eggs, { x = rnd(120), y = -10 })
    egg_spawn_timer = 0
  end

  for egg in all(eggs) do
    egg.y += egg_speed
    -- checking if egg is caught
    if abs(egg.x - basket_x) < 12 and egg.y + 4 >= basket_y and egg.y <= basket_y + 8 then
      del(eggs, egg)
      score += 1
      
      -- bonus lives
      if score % 5 == 0 then
        live_count += 1
      end
    end
    if egg.y > 160 then
      del(eggs, egg)
      live_count -= 1
    end
  end
end

-- custom function
function draw_scaled_sprite(sprite_id, x, y, scale)
  -- pos_x
  local sx = (sprite_id % 16) * 8
  -- pos_y
  local sy = flr(sprite_id / 16) * 8
  -- w / h
  local sw, sh = 8, 8

  sspr(sx, sy, sw, sh, x, y, sw * scale, sh * scale)
end

__gfx__
0000000000000000000cc00000077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000880088000c77c0000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888887780c77ddc0077aa770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09000090888888780c7dd6c007aaaa67000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9a0000a908888880c777dd6c7aaaaa67000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9a9999a900888800c77dd6dc07aaa670000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09aaaa90000880000c77ddc0007aa770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
009999000000000000cccc0000077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000004040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000004040000000404040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000





